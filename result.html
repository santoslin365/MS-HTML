<!DOCTYPE html>
<html>
<head>
    <title>æ‚¨çš„å°ˆå±¬åˆ†æå ±å‘Š</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding: 30px; max-width: 800px; margin: auto; background-color: #f9f9f9; }
        .printable-area { background: white; padding: 40px; border-radius: 15px; box-shadow: 0 0 20px rgba(0,0,0,0.1); }
        h1 { color: #2c3e50; }
        .section { margin: 30px 0; padding-bottom: 20px; border-bottom: 1px dashed #ccc; }
        .analysis { background: #e8f4fc; padding: 20px; border-radius: 10px; }
        .banner { background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%); color: white; padding: 20px; border-radius: 10px; text-align: center; }
        button { padding: 12px 25px; background: #2575fc; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 16px; margin: 10px; }
        button:hover { background: #1a68e8; }
        @media print {
            button { display: none; }
            .printable-area { box-shadow: none; }
        }
    </style>
</head>
<body>
    <div class="printable-area" id="printableArea">
        <!-- æ¨™é¡Œå€ -->
        <div class="banner">
            <h1>âœ¨ å°ˆå±¬ AI äº’å‹•åˆ†æå ±å‘Š âœ¨</h1>
            <p>ä»¥ä¸‹ç‚ºæ‚¨ç¨ä¸€ç„¡äºŒçš„æ€§æ ¼èˆ‡æ˜Ÿåº§è§£æ</p>
        </div>

        <!-- åŸºæœ¬è³‡æ–™ -->
        <div class="section">
            <h2>ğŸ‘¤ ç©å®¶è³‡æ–™</h2>
            <p><strong>ç©å®¶ IDï¼š</strong> <span id="pid"></span></p>
            <p><strong>ç©å®¶ç·¨è™Ÿï¼š</strong> <span id="pnum"></span></p>
            <p><strong>ç”Ÿæ—¥ï¼š</strong> <span id="bday"></span></p>
        </div>

        <!-- æ˜Ÿåº§åˆ†æ -->
        <div class="section">
            <h2>â™‹ æ˜Ÿåº§è§£æ</h2>
            <p><strong>æ‚¨çš„æ˜Ÿåº§ï¼š</strong> <span id="zodiacSign"></span></p>
            <p id="zodiacTraits"></p>
        </div>

        <!-- å•ç­”åˆ†æ -->
        <div class="section">
            <h2>ğŸ“Š å•ç­”åˆ†æçµæœ</h2>
            <div class="analysis">
                <p id="answerSummary"></p>
                <p id="personalityType"></p>
                <p id="aiAdvice"></p>
            </div>
        </div>

        <!-- çµå°¾ -->
        <div style="text-align: center; margin-top: 40px; color: #7f8c8d; font-style: italic;">
            <p>æœ¬å ±å‘Šç”± AI ç³»çµ±ç”Ÿæˆï¼Œåƒ…ä¾›å¨›æ¨‚åƒè€ƒã€‚</p>
            <p>ç”Ÿæˆæ—¥æœŸï¼š <span id="today"></span></p>
        </div>
    </div>

    <div style="text-align: center; margin-top: 30px;">
        <button onclick="window.print()">ğŸ–¨ï¸ åˆ—å°æ­¤å ±å‘Š</button>
        <button onclick="location.href='index.html'">ğŸ”„ é‡æ–°é–‹å§‹</button>
    </div>

    <script>
        // å¾ç¶²å€å–å¾—æ‰€æœ‰è³‡æ–™
        const urlParams = new URLSearchParams(window.location.search);
        const playerId = urlParams.get('playerId');
        const playerNumber = urlParams.get('playerNumber');
        const birthday = urlParams.get('birthday');
        const q1 = urlParams.get('q1');
        const q2 = urlParams.get('q2');
        const q3 = urlParams.get('q3');

        // 1. é¡¯ç¤ºåŸºæœ¬è³‡æ–™
        document.getElementById('pid').textContent = playerId;
        document.getElementById('pnum').textContent = playerNumber;
        document.getElementById('bday').textContent = birthday;
        document.getElementById('today').textContent = new Date().toLocaleDateString();

        // 2. æ˜Ÿåº§åˆ†æå‡½æ•¸ (ç°¡å–®ç‰ˆ)
        function getZodiacSignAndTraits(birthdayStr) {
            const date = new Date(birthdayStr);
            const month = date.getMonth() + 1;
            const day = date.getDate();

            const zodiacs = [
                { name: "æ‘©ç¾¯åº§", start: [12, 22], end: [1, 19], traits: "ç©©é‡ã€è² è²¬ã€æœ‰è€å¿ƒ" },
                { name: "æ°´ç“¶åº§", start: [1, 20], end: [2, 18], traits: "å‰µæ–°ã€ç¨ç«‹ã€ç†æ€§" },
                { name: "é›™é­šåº§", start: [2, 19], end: [3, 20], traits: "æµªæ¼«ã€æ•æ„Ÿã€æœ‰åŒæƒ…å¿ƒ" },
                { name: "ç‰¡ç¾Šåº§", start: [3, 21], end: [4, 19], traits: "å‹‡æ•¢ã€ç†±æƒ…ã€ç›´æ¥" },
                { name: "é‡‘ç‰›åº§", start: [4, 20], end: [5, 20], traits: "å‹™å¯¦ã€æ²‰ç©©ã€å–œæ„›ç¾å¥½äº‹ç‰©" },
                { name: "é›™å­åº§", start: [5, 21], end: [6, 20], traits: "éˆæ´»ã€å¥½å¥‡ã€å–„æ–¼æºé€š" },
                { name: "å·¨èŸ¹åº§", start: [6, 21], end: [7, 22], traits: "æº«æŸ”ã€é¡§å®¶ã€ç›´è¦ºå¼·" },
                { name: "ç…å­åº§", start: [7, 23], end: [8, 22], traits: "è‡ªä¿¡ã€æ…·æ…¨ã€æœ‰é ˜å°åŠ›" },
                { name: "è™•å¥³åº§", start: [8, 23], end: [9, 22], traits: "ç´°å¿ƒã€åˆ†æåŠ›å¼·ã€è¿½æ±‚å®Œç¾" },
                { name: "å¤©ç§¤åº§", start: [9, 23], end: [10, 22], traits: "å„ªé›…ã€å…¬æ­£ã€å–œæ­¡å’Œè«§" },
                { name: "å¤©è åº§", start: [10, 23], end: [11, 21], traits: "ç¥ç§˜ã€æœæ–·ã€æœ‰æ´å¯ŸåŠ›" },
                { name: "å°„æ‰‹åº§", start: [11, 22], end: [12, 21], traits: "æ¨‚è§€ã€æ„›è‡ªç”±ã€æ„›æ¢ç´¢" }
            ];

            for (let z of zodiacs) {
                const [startM, startD] = z.start;
                const [endM, endD] = z.end;

                if ((month === startM && day >= startD) || (month === endM && day <= endD)) {
                    return { sign: z.name, traits: z.traits };
                }
            }
            return { sign: "æœªçŸ¥", traits: "ç„¡æ³•åˆ¤æ–·" };
        }

        // 3. å•ç­”åˆ†æé‚è¼¯ (æ¨¡æ“¬AI)
        function analyzeAnswers(q1, q2, q3) {
            const scores = { A: 0, B: 0, C: 0 };
            scores[q1]++; scores[q2]++; scores[q3]++;

            let type = "å¹³è¡¡å‹";
            if (scores.A >= 2) type = "è¡Œå‹•æ´¾";
            else if (scores.B >= 2) type = "æ€è€ƒæ´¾";
            else if (scores.C >= 2) type = "ç¤¾äº¤æ´¾";

            const advice = {
                "è¡Œå‹•æ´¾": "æ‚¨å……æ»¿è¡Œå‹•åŠ›ï¼Œé©åˆæ“”ä»»é–‹å‰µè€…ã€‚å»ºè­°åœ¨è¡Œå‹•å‰ç¨ä½œè¦åŠƒã€‚",
                "æ€è€ƒæ´¾": "æ‚¨å–„æ–¼åˆ†æï¼Œæ˜¯åœ˜éšŠä¸­çš„è»å¸«ã€‚è©¦è‘—å¤šåˆ†äº«æ‚¨çš„æƒ³æ³•ã€‚",
                "ç¤¾äº¤æ´¾": "æ‚¨äººéš›èæ´½ï¼Œæ˜¯å¾ˆå¥½çš„å”èª¿è€…ã€‚å¯ä»¥å¤šç™¼æ®é€£çµçœ¾äººçš„èƒ½åŠ›ã€‚",
                "å¹³è¡¡å‹": "æ‚¨å„æ–¹é¢å‡è¡¡ç™¼å±•ï¼Œé©æ‡‰åŠ›å¼·ã€‚ä¿æŒé–‹æ”¾æ…‹åº¦å˜—è©¦æ–°äº‹ç‰©ã€‚"
            };

            return {
                summary: `æ‚¨çš„ç­”æ¡ˆåˆ†å¸ƒï¼šA(${scores.A})ã€B(${scores.B})ã€C(${scores.C})`,
                type: type,
                advice: advice[type]
            };
        }

        // 4. åŸ·è¡Œåˆ†æä¸¦é¡¯ç¤ºçµæœ
        const zodiac = getZodiacSignAndTraits(birthday);
        document.getElementById('zodiacSign').textContent = zodiac.sign;
        document.getElementById('zodiacTraits').textContent = `æ€§æ ¼ç‰¹é»ï¼š${zodiac.traits}`;

        const analysis = analyzeAnswers(q1, q2, q3);
        document.getElementById('answerSummary').textContent = analysis.summary;
        document.getElementById('personalityType').innerHTML = `<strong>é¡å‹åˆ¤å®šï¼š${analysis.type}</strong>`;
        document.getElementById('aiAdvice').textContent = `ğŸ’¡ AI å»ºè­°ï¼š${analysis.advice}`;
    </script>
</body>
</html>